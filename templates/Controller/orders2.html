{% load static  %}

<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>WAREFLOW</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    <!-- FontAwesome JS-->
	<script defer src="{% static 'assets/plugins/fontawesome/js/all.min.js' %}"></script>

    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="{% static 'assets/css/portal.css' %}">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


	<style>
        /* Add your CSS styling here */
        /* This is just a basic example */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
			z-index: 9999;
        }


		.error-message {
			display: none;
			color: red;
			font-size: 14px;
			border: 1px solid red;
			padding: 10px;
			background-color: #ffe6e6;
			text-align: center;
		}


		 /* Style the tab links */
		 .nav-tabs {
			list-style: none;
			padding: 0;
			display: flex;
		}
		
		.nav-tabs li {
			margin-right: 10px;
		}
		
		.nav-tabs a {
			text-decoration: none;
			padding: 10px 20px;
			background-color: #007BFF;
			color: #fff;
			border-radius: 5px;
		}
		
		.nav-tabs a:hover {
			background-color: #0056b3;
		}
		
		.nav-tabs a.active {
			background-color: #fff;
			color: #007BFF;
		}
		
    </style>

</head> 

<body class="app">   	
    <header class="app-header fixed-top">	   	            
        <div class="app-header-inner">  
	        <div class="container-fluid py-2">
		        <div class="app-header-content"> 
		            <div class="row justify-content-between align-items-center">
			        
				    <div class="col-auto">
					    <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
						    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg>
					    </a>
				    </div><!--//col-->
		            
		            <div class="app-utilities col-auto ml-auto">
			            {% comment %} <div class="app-utility-item app-notifications-dropdown dropdown">    
				            <a class="dropdown-toggle no-toggle-arrow" id="notifications-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false" title="Notifications">
					            <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bell icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2z"/>
  <path fill-rule="evenodd" d="M8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
</svg>
					            <span class="icon-badge">3</span>
					        </a><!--//dropdown-toggle-->
					        
					        <div class="dropdown-menu p-0" aria-labelledby="notifications-dropdown-toggle">
					            <div class="dropdown-menu-header p-3">
						            <h5 class="dropdown-menu-title mb-0">Notifications</h5>
						        </div><!--//dropdown-menu-title-->
						        <div class="dropdown-menu-content">
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="{% static 'assets/images/profiles/profile-1.png' %}" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Amy shared a file with you. Lorem ipsum dolor sit amet, consectetur adipiscing elit. </div>
											        <div class="meta"> 2 hrs ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href={% url 'notifications' %}></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-receipt" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
	  <path fill-rule="evenodd" d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z"/>
	  <path fill-rule="evenodd" d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
	</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">You have a new invoice. Proin venenatis interdum est.</div>
											        <div class="meta"> 1 day ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href={% url 'notifications' %}></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										        <div class="app-icon-holder icon-holder-mono">
											        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bar-chart-line" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
</svg>
										        </div>
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">Your report is ready. Proin venenatis interdum est.</div>
											        <div class="meta"> 3 days ago</div>
										        </div>
									        </div><!--//col-->
								        </div><!--//row-->
								        <a class="link-mask" href={% url 'notifications' %}></a>
							       </div><!--//item-->
							       <div class="item p-3">
								        <div class="row gx-2 justify-content-between align-items-center">
									        <div class="col-auto">
										       <img class="profile-image" src="{% static 'assets/images/profiles/profile-2.png' %}" alt="">
									        </div><!--//col-->
									        <div class="col">
										        <div class="info"> 
											        <div class="desc">James sent you a new message.</div>
											        <div class="meta"> 7 days ago</div>
										        </div>
									        </div><!--//col--> 
								        </div><!--//row-->
								        <a class="link-mask" href={% url 'notifications' %}></a>
							       </div><!--//item-->
						        </div><!--//dropdown-menu-content-->
						        
						        <div class="dropdown-menu-footer p-2 text-center">
							        <a href={% url 'notifications' %}>View all</a>
						        </div>
															
							</div><!--//dropdown-menu-->					        
				        </div><!--//app-utility-item--> {% endcomment %}
			            
			            <div class="app-utility-item app-user-dropdown dropdown">
							<a class="dropdown-toggle" id="user-dropdown-toggle"
								data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
								<img src="{% if request.session.profile_picture_url %}{{ request.session.profile_picture_url }}{% else %}{% static 'assets/images/user.png' %}{% endif %}" alt="user profile">
							</a>
							<ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
								<li><span class="dropdown-item">{{ request.session.name }}</span></li>
								<li><a class="dropdown-item" href={% url 'profile_view' %}>Account</a></li>
								<li><hr class="dropdown-divider"></li>
								<li><a class="dropdown-item" href={% url 'loggout' %}>Log Out</a></li>
							</ul>
						</div><!--//app-user-dropdown-->
		            </div><!--//app-utilities-->
		        </div><!--//row-->
	            </div><!--//app-header-content-->
	        </div><!--//container-fluid-->
        </div><!--//app-header-inner-->
        <div id="app-sidepanel" class="app-sidepanel sidepanel-hidden"> 
	        <div id="sidepanel-drop" class="sidepanel-drop"></div>
	        <div class="sidepanel-inner d-flex flex-column">
		        <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
		        <div class="app-branding">
		            <a class="app-logo" href={% url 'controllerindex' %}><img class="logo-icon me-2" src="{% static 'assets/images/app-logo.svg' %}" alt="logo"><span class="logo-text">WAREFLOW</span></a>
	
		        </div><!--//app-branding-->  
			    <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
				    <ul class="app-menu list-unstyled accordion" id="menu-accordion">
					    <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link" href={% url 'controllerindex' %}>
						        <span class="nav-icon">
						        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house-door" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
		  <path fill-rule="evenodd" d="M7.646 1.146a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5H9.5a.5.5 0 0 1-.5-.5v-4H7v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4h3.5V7.707L8 2.207l-5.5 5.5z"/>
		  <path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
		</svg>
						         </span>
		                         <span class="nav-link-text">Dashboard</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
						<li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link" href="{% url 'stock_list' %}">
									<span class="nav-icon svg-icon svg-icon-primary svg-icon-2x"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo8/dist/../src/media/svg/icons/Shopping/Cart1.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
										<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
											<rect x="0" y="0" width="24" height="24"/>
											<path d="M18.1446364,11.84388 L17.4471627,16.0287218 C17.4463569,16.0335568 17.4455155,16.0383857 17.4446387,16.0432083 C17.345843,16.5865846 16.8252597,16.9469884 16.2818833,16.8481927 L4.91303792,14.7811299 C4.53842737,14.7130189 4.23500006,14.4380834 4.13039941,14.0719812 L2.30560137,7.68518803 C2.28007524,7.59584656 2.26712532,7.50338343 2.26712532,7.4104669 C2.26712532,6.85818215 2.71484057,6.4104669 3.26712532,6.4104669 L16.9929851,6.4104669 L17.606173,3.78251876 C17.7307772,3.24850086 18.2068633,2.87071314 18.7552257,2.87071314 L20.8200821,2.87071314 C21.4717328,2.87071314 22,3.39898039 22,4.05063106 C22,4.70228173 21.4717328,5.23054898 20.8200821,5.23054898 L19.6915238,5.23054898 L18.1446364,11.84388 Z" fill="#000000" opacity="0.3"/>
											<path d="M6.5,21 C5.67157288,21 5,20.3284271 5,19.5 C5,18.6715729 5.67157288,18 6.5,18 C7.32842712,18 8,18.6715729 8,19.5 C8,20.3284271 7.32842712,21 6.5,21 Z M15.5,21 C14.6715729,21 14,20.3284271 14,19.5 C14,18.6715729 14.6715729,18 15.5,18 C16.3284271,18 17,18.6715729 17,19.5 C17,20.3284271 16.3284271,21 15.5,21 Z" fill="#000000"/>
										</g>
									</svg><!--end::Svg Icon--></span>
		                         <span class="nav-link-text">Stock</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
					    <li class="nav-item">
							<!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
							<a class="nav-link" href="{% url 'controllercharts' %}">
								<span class="nav-icon">
									<svg width="1em" height="1em" viewBox="0 0 16 16"
										class="bi bi-bar-chart-line" fill="currentColor"
										xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd"
											d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z" />
									</svg>
								</span>
								<span class="nav-link-text">Charts</span>
							</a><!--//nav-link-->
						</li><!--//nav-item-->
					   
						<li class="nav-item">
							<!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
							<a class="nav-link active" href="{% url 'list_orders2' %}">
								<span class="nav-icon">
									<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M9.99998 15L9.99999 19C10 20.1046 9.10457 21 7.99999 21H4C2.89543 21 2 20.1046 2 19V15C2 13.8954 2.89543 13 4 13H7.99998C9.10455 13 9.99998 13.8954 9.99998 15Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> <path d="M16 4.99999L16 8.99999C16 10.1046 15.1046 11 14 11H10C8.89543 11 8 10.1046 8 9V5C8 3.89543 8.89543 3 10 3H14C15.1045 3 16 3.89543 16 4.99999Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> <path d="M22 15L22 19C22 20.1046 21.1046 21 20 21H16C14.8954 21 14 20.1046 14 19V15C14 13.8954 14.8954 13 16 13H20C21.1045 13 22 13.8954 22 15Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> <path d="M6 16V13" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> <path d="M12 6V3" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> <path d="M18 16V13" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/> </svg>
								</span>
								<span class="nav-link-text">orders</span>
							</a><!--//nav-link-->
						</li><!--//nav-item-->
										    
					    <li class="nav-item">
							<!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
							<a class="nav-link" href="{% url 'sales' %}">
								<span class="nav-icon">
									<svg width="1em" height="1em" viewBox="0 0 16 16"
										class="bi bi-question-circle" fill="currentColor"
										xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd"
											d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
										<path
											d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
									</svg>
								</span>
								<span class="nav-link-text">Sales</span>
							</a><!--//nav-link-->
						</li><!--//nav-item-->
				    </ul><!--//app-menu-->
			    </nav><!--//app-nav-->
			    <div class="app-sidepanel-footer">
				    <nav class="app-nav app-nav-footer">
					    <ul class="app-menu footer-menu list-unstyled">
							<li class="nav-item">
								<a class="nav-link" href={% url 'loggout' %}>
									<span class="nav-icon">
										<svg style="color: rgb(93, 94, 101);" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" fill="#5d5e65"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>										</span>
									<span class="nav-link-text">Logout</span>
								</a>
							</li><!--//nav-item-->
					    </ul><!--//footer-menu-->
				    </nav>
			    </div><!--//app-sidepanel-footer-->
	        </div><!--//sidepanel-inner-->
	    </div><!--//app-sidepanel-->
    </header><!--//app-header-->
    
    <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">
			    
			    <div class="row g-3 mb-4 align-items-center justify-content-between">
				    <div class="col-auto">
			            <h1 class="app-page-title mb-0">Orders</h1>
				    </div>
				    <div class="col-auto">
					     <div class="page-utilities">
						    <div class="row g-2 justify-content-start justify-content-md-end align-items-center">
							    <div class="col-auto">
								    <form class="table-search-form row gx-1 align-items-center">
					                    <div class="col-auto">
					                        <input type="text" id="search-orders" name="searchorders" class="form-control search-orders" placeholder="Search">
					                    </div>
					                    {% comment %} <div class="col-auto">
											<select class="form-select w-auto" >
												<option selected value="option-1">All</option>
												<option value="option-2">This week</option>
												<option value="option-3">This month</option>
												<option value="option-4">Last 3 months</option>
												
										  </select>
					                        
					                    </div> {% endcomment %}
					                </form>
					                
							    </div><!--//col-->
							    <div class="col-auto">
								    <a class="btn btn-info" href="#" id="showFormButton">
										{% comment %} <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-download me-1" fill="currentColor" xmlns="http://www.w3.org/2000/svg"> {% endcomment %}
											<path fill-rule="evenodd" d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
											<path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
										{% comment %} </svg> {% endcomment %}
										Add Orders
									</a>
								    
							    </div>
							    <div class="col-auto">						    
									<button id="deleteAllButton" class="btn text-white btn-danger" disabled>Cancel All</button>
								</div>
								<div class="col-auto">						  
									<a id="generate-pdf-btn" class="btn btn-secondary" href="{% url 'view_order_pdf' %}">Generate PDF</a>
								</div>
						    </div><!--//row-->
					    </div><!--//table-utilities-->
				    </div><!--//col-auto-->
			    </div><!--//row-->
			   
				<!-- order_search_and_delete.html -->
				



				<div id="orderFormPopup" class="popup" action="">
					<h2>Add Order</h2>
					<form method="post" enctype="multipart/form-data" id="add-order-form">
						{% csrf_token %}
				
						<input type="hidden" id="order-id" name="order-id">
						<div class="form-group">
							<label for="product">Product:</label>
							<select id="product" name="product" class="form-control">
								<option value="" disabled selected>Select</option>
								{% for Product in products %}
								<option value="{{ Product.product_id }}">{{ Product.product_name }}</option>
								{% endfor %}
							</select>
							<span id="product-error" class="error text-danger"></span> <!-- Error message for Product -->
						</div>
						<div class="form-group">
							<label for="supplier">Supplier:</label>
							<select id="supplier" name="supplier" class="form-control">
								<option value="" disabled selected>Select</option>
								{% for Supplier in suppliers %}
								<option value="{{ Supplier.supplier_id }}">{{ Supplier.supplier_name }}</option>
								{% endfor %}
							</select>
							<span id="supplier-error" class="error text-danger"></span> <!-- Error message for Supplier -->
						</div>
						<!-- Replace orderstatus field with a hidden input -->
						<input type="hidden" name="orderstatus" value="Order Placed">
						<div class="form-group">
							<label for="warehouse">Warehouse:</label>
							<input type="text" id="warehouse" name="warehouse" class="form-control">
							<span id="warehouse-error" class="error text-danger"></span> <!-- Error message for Warehouse -->
						</div>
						<div class="form-group">
							<label for="quantity">Quantity:</label>
							<input type="number" id="quantity" name="quantity" class="form-control">
							<span id="available-stock" class="error text-danger"></span> <!-- Error message for Warehouse -->
							<span id="quantity-error" class="error text-danger"></span> <!-- Error message for Quantity -->
							<span id="available_quantity-error" class="error text-danger"></span> <!-- Error message for Warehouse -->
						</div>
						<div class="form-group">
							<label for="buying_price">Buying Price:</label>
							<input type="text" id="buying_price" name="buying_price" class="form-control">
							<span id="buying_price-error" class="error text-danger"></span> <!-- Error message for Buying Price -->
						</div>
						<input type="submit" value="Add" class="btn btn-primary">
						<button type="button" id="cancelButton" class="btn btn-secondary">Cancel</button>
					</form>
				</div>
				
				  
                
                <script>
                    const showFormButton = document.getElementById('showFormButton');
                    const orderFormPopup = document.getElementById('orderFormPopup');
                    const cancelButton = document.getElementById('cancelButton');
                
                    showFormButton.addEventListener('click', () => {
                        orderFormPopup.style.display = 'block';
                    });
                
                    cancelButton.addEventListener('click', () => {
                        orderFormPopup.style.display = 'none';
                    });
					
                </script>
			
				<ul class="nav nav-tabs" id="orderTabs" role="tablist">
					<li><a class="tab-link" href="#all-orders">All Orders</a></li>
					<li><a class="tab-link" href="#delivered-orders">Delivered Orders</a></li>
					<li><a class="tab-link" href="#cancelled-orders">Cancelled Orders</a></li>
					<li><a class="tab-link" href="#returned-orders">Returned Orders</a></li>
					<li><a class="tab-link" href="#in-return">In Return</a></li>
					<li><a class="tab-link" href="#in-transit">In Transit</a></li>
				</ul>
			
				<div id="all-orders" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th> <!-- Add an empty header cell for checkboxes -->
													<th class="cell">Product</th>
													<th class="cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th> <!-- Added Buying Price column -->
													<th class="cell">Total Price</th> <!-- Added Total Price column -->
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td> <!-- Display Buying Price -->
														<td class="cell">{{ order.total_price }}</td> <!-- Calculate and Display Total Price -->
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															{% if order.order_status == 'cancelled' %}
																<button class="btn btn-danger text-white" disabled>Cancelled</button>
															{% elif order.order_status == 'Delivered' %}
																<a class="btn btn-danger text-white return-order" href="#" data-order-id="{{ order.order_id }}">Return</a>
															{% elif order.order_status == 'Return Initiated' %}
																<a class="btn btn-danger text-white delivered-order" href="#" data-order-id="{{ order.order_id }}">Cancel Return</a>
															{% elif order.order_status == 'Return Completed' %}
																<button class="btn btn-danger text-white" disabled>Returned</button>
															{% else %}
																<a class="btn btn-danger text-white cancel-order" href="#" data-order-id="{{ order.order_id }}">Cancel</a>
															{% endif %}
														</td>
														<td class="cell">
															{% if order.order_status == 'cancelled' %}
																<button class="btn btn-primary text-white" disabled>Cancelled</button>
															{% elif order.order_status == 'Delivered' %}
																<button class="btn btn-primary text-white" disabled>Update</button>
															{% elif order.order_status == 'Return Initiated' %}
																<button class="btn btn-primary text-white" disabled>Update</button>
															{% elif order.order_status == 'Return Completed' %}
																<button class="btn btn-danger text-white" disabled>Returned</button>
															{% else %}
																<a class="btn btn-primary text-white update-order" href="#" data-order-id="{{ order.order_id }}">Update</a>
															{% endif %}
														</td>
														<td class="cell">
															{% if order.order_status == 'cancelled' %}
																<button class="btn btn-danger text-white" disabled>Cancelled</button>
															{% elif order.order_status == 'Delivered' %}
																<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
															{% elif order.order_status == 'Return Initiated' %}
																<button class="btn btn-danger text-white returned-order" data-order-id="{{ order.order_id }}">Mark as Return Complete</button>
															{% elif order.order_status == 'Return Completed' %}
																<button class="btn btn-danger text-white" disabled>Returned</button>
															{% else %}
																<a class="btn btn-danger text-white delivered-order" href="#" data-order-id="{{ order.order_id }}">Mark as Delivered</a>
															{% endif %}
														</td>
													</tr>
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
			
				<div id="delivered-orders" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-delivered" role="tabpanel" aria-labelledby="orders-delivered-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th>
													<th class="cell">Product</th>
													<th class "cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th>
													<th class="cell">Total Price</th>
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													{% if order.order_status == 'Delivered' %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td>
														<td class="cell">{{ order.total_price }}</td>
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Delivered</button>
														</td>
														<td class="cell">
															<button class="btn btn-primary text-white" disabled>Update</button>
														</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
														</td>
													</tr>
													{% endif %}
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
			
				<div id="cancelled-orders" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-delivered" role="tabpanel" aria-labelledby="orders-delivered-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th>
													<th class="cell">Product</th>
													<th class "cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th>
													<th class="cell">Total Price</th>
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													{% if order.order_status == 'cancelled' %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td>
														<td class="cell">{{ order.total_price }}</td>
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Delivered</button>
														</td>
														<td class="cell">
															<button class="btn btn-primary text-white" disabled>Update</button>
														</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
														</td>
													</tr>
													{% endif %}
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
			
				<div id="returned-orders" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-delivered" role="tabpanel" aria-labelledby="orders-delivered-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th>
													<th class="cell">Product</th>
													<th class "cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th>
													<th class="cell">Total Price</th>
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													{% if order.order_status == 'Return Completed' %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td>
														<td class="cell">{{ order.total_price }}</td>
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Delivered</button>
														</td>
														<td class="cell">
															<button class="btn btn-primary text-white" disabled>Update</button>
														</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
														</td>
													</tr>
													{% endif %}
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
			
				<div id="in-return" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-delivered" role="tabpanel" aria-labelledby="orders-delivered-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th>
													<th class="cell">Product</th>
													<th class "cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th>
													<th class="cell">Total Price</th>
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													{% if order.order_status == 'Return Initiated' %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td>
														<td class="cell">{{ order.total_price }}</td>
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Delivered</button>
														</td>
														<td class="cell">
															<button class="btn btn-primary text-white" disabled>Update</button>
														</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
														</td>
													</tr>
													{% endif %}
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
			
				<div id="in-transit" class="tab">
					<div class="tab-content" id="orders-table-tab-content">
						<div class="tab-pane fade show active" id="orders-delivered" role="tabpanel" aria-labelledby="orders-delivered-tab">
							<div class="app-card app-card-orders-table shadow-sm mb-5">
								<div class="app-card-body">
									<div class="table-responsive">
										<table class="table app-table-hover mb-0 text-left">
											<thead>
												<tr>
													<th class="cell"></th>
													<th class="cell">Product</th>
													<th class "cell">Supplier</th>
													<th class="cell">Warehouse</th>
													<th class="cell">Date</th>
													<th class="cell">Quantity</th>
													<th class="cell">Buying Price</th>
													<th class="cell">Total Price</th>
													<th class="cell">Status</th>
													<th class="cell"></th>
													<th class="cell"></th>
													<th class="cell"></th>
												</tr>
											</thead>
											<tbody>
												{% for order in page %}
													{% if order.order_status == 'Order Placed' %}
													<tr class="order-row">
														<td class="cell">
															<input type="checkbox" class="order-checkbox" data-order-id="{{ order.order_id }}">
															<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
														</td>
														<td class="cell order-name"><span class="truncate">{{ order.product }}</span></td>
														<td class="cell">{{ order.supplier }}</td>
														<td class="cell">{{ order.warehouse }}</td>
														<td class="cell">{{ order.order_datetime }}</td>
														<td class="cell">{{ order.quantity }}</td>
														<td class="cell">{{ order.buying_price }}</td>
														<td class="cell">{{ order.total_price }}</td>
														<td class="cell">{{ order.order_status }}</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Delivered</button>
														</td>
														<td class="cell">
															<button class="btn btn-primary text-white" disabled>Update</button>
														</td>
														<td class="cell">
															<button class="btn btn-danger text-white" disabled>Mark as Delivered</button>
														</td>
													</tr>
													{% endif %}
												{% endfor %}
											</tbody>
										</table>
										<!-- Add a "Delete All" button that starts as disabled -->
									</div><!--//table-responsive-->
								</div><!--//app-card-body-->
							</div><!--//app-card-->
						</div>
					</div>
				</div>
				
			
	
		
<script>
    $(document).ready(function () {
		// Add an event listener to handle delete clicks



		$('#product').on('change', function() {
			var productId = $(this).val();
			if (productId) {
				$.ajax({
					url: '{% url "get_stock_count" %}',
					data: {
						'product_id': productId
					},
					success: function(data) {
						var availableStock = data.available_stock;
						console.log("availableStock", availableStock);
						$('#available-stock').text(availableStock); // Display available stock in some element
					}
				});
			}
		});
		
		// Listen for form submission outside of the change event handler
		
		const tabLinks = document.querySelectorAll(".tab-link");
		const tabs = document.querySelectorAll(".tab");

		tabLinks.forEach((link) => {
			link.addEventListener("click", () => {
				// Hide all tabs
				tabs.forEach((tab) => {
					tab.style.display = "none";
				});

				// Show the selected tab
				const targetTabId = link.getAttribute("href").substring(1);
				const targetTab = document.getElementById(targetTabId);
				targetTab.style.display = "block";
			});
		});

		// Initially, hide all tabs except the "All Orders" tab
		tabs.forEach((tab) => {
			if (tab.id !== "all-orders") {
				tab.style.display = "none";
			}
		});

		// Show the "All Orders" tab
		document.getElementById("all-orders").style.display = "block";

		

		const deleteLinks = document.querySelectorAll(".cancel-order");
	
		deleteLinks.forEach(link => {
			link.addEventListener("click", function (e) {
				e.preventDefault();
				const orderId = link.getAttribute("data-order-id");
	
				if (orderId) {

					const confirmation = window.confirm("Are you sure you want to Cancel this order?");

                
                if (confirmation) {
					// Send an AJAX request to the Django view to delete the order
					$.ajax({
						url: `/cancel_order/${orderId}/`, // Replace with your delete view URL
						method: "POST", // or "GET" depending on your view
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}', // Include CSRF token
						},
						success: function (data) {
							// Handle success (e.g., remove the row from the table)
							link.closest("tr").remove();
							window.location.href = "/list_orders/";
						},
						error: function (error) {
							console.error("Error cancelling order:", error);
						},
					});
				}
				}
			});
		});
	

		const deliverLinks = document.querySelectorAll(".delivered-order");
	
		deliverLinks.forEach(link => {
			link.addEventListener("click", function (e) {
				e.preventDefault();
				const orderId = link.getAttribute("data-order-id");
	
				if (orderId) {
					const confirmation = window.confirm("Are you sure you want to mark this order as Delivered?");
                
                if (confirmation) {
					// Send an AJAX request to the Django view to delete the order
					$.ajax({
						url: `/deliver_order/${orderId}/`, // Replace with your delete view URL
						method: "POST", // or "GET" depending on your view
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}', // Include CSRF token
						},
						success: function (data) {
							// Handle success (e.g., remove the row from the table)
							link.closest("tr").remove();
							window.location.href = "/list_orders/";
						},
						error: function (error) {
							console.error("Error delivering order:", error);
						},
					});
				}
				}
			});
		});



		const returnedLinks = document.querySelectorAll(".returned-order");
	
		returnedLinks.forEach(link => {
			link.addEventListener("click", function (e) {
				e.preventDefault();
				const orderId = link.getAttribute("data-order-id");
	
				if (orderId) {
					const confirmation = window.confirm("Are you sure you want to mark this order as Return Completed?");
                
                if (confirmation) {
					// Send an AJAX request to the Django view to delete the order
					$.ajax({
						url: `/returned_order/${orderId}/`, // Replace with your delete view URL
						method: "POST", // or "GET" depending on your view
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}', // Include CSRF token
						},
						success: function (data) {
							// Handle success (e.g., remove the row from the table)
							link.closest("tr").remove();
							window.location.href = "/list_orders/";
						},
						error: function (error) {
							console.error("Error returning order:", error);
						},
					});
				}
				}
			});
		});


		const returnLinks = document.querySelectorAll(".return-order");
	
		returnLinks.forEach(link => {
			link.addEventListener("click", function (e) {
				e.preventDefault();
				const orderId = link.getAttribute("data-order-id");
	
				if (orderId) {
					const confirmation = window.confirm("Are you sure you want to mark this order as returned?");
                
                if (confirmation) {
					// Send an AJAX request to the Django view to delete the order
					$.ajax({
						url: `/return_order/${orderId}/`, // Replace with your delete view URL
						method: "POST", // or "GET" depending on your view
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}', // Include CSRF token
						},
						success: function (data) {
							// Handle success (e.g., remove the row from the table)
							link.closest("tr").remove();
							window.location.href = "/list_orders/";
						},
						error: function (error) {
							console.error("Error returning order:", error);
						},
					});
				}
				}
			});
		});

		// Add event listeners for checkboxes
		const checkboxes = document.querySelectorAll(".order-checkbox");
	
		checkboxes.forEach(checkbox => {
			checkbox.addEventListener("change", function () {
				// Check if at least one checkbox is checked
				const isChecked = Array.from(checkboxes).some(cb => cb.checked);
				const deleteAllButton = document.getElementById("deleteAllButton");
				
				// Enable or disable the "Delete All" button based on checkbox state
				deleteAllButton.disabled = !isChecked;
			});
		});
	
		// Add an event listener for the "Delete All" button
		const csrfToken = "{{ csrf_token }}";	
		const deleteAllButton = document.getElementById("deleteAllButton");
		

		deleteAllButton.addEventListener("click", function () {
			const checkedCheckboxes = document.querySelectorAll(".order-checkbox:checked");
		
		
			// Show a confirmation dialog
			const confirmation = window.confirm("Are you sure you want to delete the selected orders?");
			
			if (confirmation) {
				// Get the order IDs of selected checkboxes
				const orderIds = Array.from(checkedCheckboxes).map(cb => cb.getAttribute("data-order-id"));
		
				// Create a FormData object to send the data including the CSRF token
				const formData = new FormData();
				orderIds.forEach(orderId => {
					formData.append("order_ids[]", orderId);
				});
		
				formData.append("csrfmiddlewaretoken", csrfToken);
		
				// Send an AJAX request to delete multiple orders
				$.ajax({
					url: `/cancel-multiple-orders/`, // Replace with your delete multiple orders view URL
					method: "POST", // or "GET" depending on your view
					data: formData, // Send the FormData object
					processData: false, // Prevent jQuery from processing the data
					contentType: false, // Set content type to false to prevent jQuery from adding a content type header
					success: function (data) {
						// Handle success (e.g., remove the rows from the table)
						orderIds.forEach(orderId => {
							const rowToRemove = document.querySelector(`.order-row[data-order-id="${orderId}"]`);
							if (rowToRemove) {
								rowToRemove.remove();
							}
						});
		
						// Disable the "Delete All" button after deletion
						deleteAllButton.disabled = true;
						
						// Redirect to the order list page
						window.location.href = "/list_orders/";
					},
					error: function (error) {
						console.error("Error deleting orders:", error);
					},
				});
			}
		});
		


		function fetchorderData(orderId) {
			$.ajax({
				url: `/get-order-details2/${orderId}/`,
				method: "GET",
				dataType: "json", // Specify the expected data type as JSON
				success: function (orderData) {
					// Populate the form fields with the retrieved data

                    
                    //document.getElementById("orderImageupdate").value = orderData.order_name;
					document.getElementById("product").value = orderData.product_id;
					document.getElementById("supplier").value = orderData.supplier_id;
					document.getElementById("warehouse").value = orderData.warehouse;
					document.getElementById("quantity").value = orderData.quantity;

					// Optionally, you can add logging to verify the data
					console.log("order Data:", orderData);
				},
				error: function () {
					// Handle error if the AJAX request fails
					console.error("Failed to fetch order data.");
				},
			});
		}
		
		
		

        // Add an event listener for the update form
        const updateButtons = document.querySelectorAll('.update-order');
        
        const orderFormPopup = document.getElementById('orderFormPopup');
        const cancelupdateButton = document.getElementById('cancelButton');

        

        updateButtons.forEach(button => {
            button.addEventListener('click', () => {
                orderFormPopup.style.display = 'block';
                
                const orderId = button.getAttribute('data-order-id');
                document.getElementById('order-id').value = orderId;
				fetchorderData(orderId);
            });
        });

        cancelButton.addEventListener('click', () => {
            orderFormPopup.style.display = 'none';
			window.location.href = "/list_orders/";
        });


		$('#search-orders').on('input', function () {
			var searchText = $(this).val().toLowerCase();
			searchorders(searchText);
		});
	
		// Function to search for orders based on the order name
		function searchorders(searchText) {
			// Iterate through each order row
			$('.order-row').each(function () {
				var orderName = $(this).find('.order-name').text().toLowerCase();
				var row = $(this);
	
				// Check if the order name contains the search text
				if (orderName.includes(searchText)) {
					row.show(); // Show the row if it matches
				} else {
					row.hide(); // Hide the row if it doesn't match
				}
			});
		}
   

        const updateorderForm = document.getElementById("add-order-form");

        updateorderForm.addEventListener("submit", function (e) {
            e.preventDefault();

            // Collect the updated data from the form
            const formData = new FormData(updateorderForm);

            // Extract the order_id from the form or data attributes
            const orderId = document.getElementById("order-id").value;


			let baseUrl =  `/add_orders/`;

							if (orderId) {
								// If productId is not null, append it to the base URL
								baseUrl =  `/update_order/${orderId}/`;
							}
            // Send an AJAX request to the update URL
            $.ajax({
				headers: {
					'X-CSRFToken': csrfToken
				},
                url: baseUrl,
                method: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    // Handle success (e.g., show a success message)
                    console.log(data.message);
					window.location.href = "/list_orders/"; // Replace with the correct URL
                },
                error: function (error) {
                    // Handle errors (e.g., display an error message)
                    console.error("Error updating order:", error);
                },
            });
			
        });

		
		
		  function generatePDF() {
			const pdf = new jsPDF();
		
			// Loop through each row of the table and add data to the PDF
			const rows = document.querySelectorAll('.order-row');
			rows.forEach((row, index) => {
			  const name = row.querySelector('.order-name').textContent;
			  const category = row.querySelectorAll('.cell')[2].textContent;
			  const subcategory = row.querySelectorAll('.cell')[3].textContent;
		
			  // Add data to the PDF
			  pdf.text(`Row ${index + 1}`, 10, 10 + index * 10);
			  pdf.text(`Name: ${name}`, 20, 20 + index * 10);
			  pdf.text(`Category: ${category}`, 20, 30 + index * 10);
			  pdf.text(`Subcategory: ${subcategory}`, 20, 40 + index * 10);
		
			  // Check if we need to add a new page for the next row
			  if (index < rows.length - 1) {
				pdf.addPage();
			  }
			});
		
			// Save the PDF as a file
			pdf.save('order_report.pdf');
		  }
			
		  document.getElementById('generate-pdf-btn').addEventListener('click', function () {
			generatePDF();
		  });


		  const orderForm = document.getElementById("add-order-form");
		  const productSelect = document.getElementById("product");
		  const supplierSelect = document.getElementById("supplier");
		  const warehouseInput = document.getElementById("warehouse");
		  const quantityInput = document.getElementById("quantity");
		  const submitButton = document.querySelector('input[type="submit"]');
		  
		  // Function to validate the "Product" field
		  function validateProduct() {
			const selectedProductValue = productSelect.value;
			const productError = document.getElementById("product-error");
			if (selectedProductValue === "") {
			  productError.textContent = "Please select a product.";
			} else {
			  productError.textContent = "";
			}
		  }
		  
		  // Function to validate the "Supplier" field
		  function validateSupplier() {
			const selectedSupplierValue = supplierSelect.value;
			const supplierError = document.getElementById("supplier-error");
			if (selectedSupplierValue === "") {
			  supplierError.textContent = "Please select a supplier.";
			} else {
			  supplierError.textContent = "";
			}
		  }
		  
		  // Function to validate the warehouse field (only alphabets and numbers, no spaces or special symbols)
		  function validateWarehouse() {
			const warehouseValue = warehouseInput.value;
			const warehouseError = document.getElementById("warehouse-error");
			const warehouseRegex = /^[A-Za-z0-9]+$/;
			if (!warehouseRegex.test(warehouseValue)) {
			  warehouseError.textContent = "Warehouse field must contain only alphabets and numbers.";
			} else {
			  warehouseError.textContent = "";
			}
		  }
		  
		  // Function to validate the quantity field (only numerical values)
		  function validateQuantity() {
			const quantityValue = quantityInput.value;
			const quantityError = document.getElementById("quantity-error");
			if (!/^\d+$/.test(quantityValue)) {
			  quantityError.textContent = "Quantity field must contain only numerical values.";
			} else {
			  quantityError.textContent = "";
			}
		  
			var enteredQuantity = parseInt(quantityValue);
			var availableStock = parseInt(document.getElementById("available-stock").textContent);
		  
			console.log("Entered Quantity:", enteredQuantity);
			console.log("Available Stock:", availableStock);
		  
			if (enteredQuantity > availableStock) {
			  quantityError.textContent = 'Entered quantity is higher than available stock.';
			  submitButton.disabled = true; // Disable the submit button
			} else {
			  console.log("Form submitted.");
			  quantityError.textContent = ''; // Clear any previous error message
			  submitButton.disabled = false; // Enable the submit button
			}
		  }
		  
		  // Add input event listeners to trigger field validation on input
		  productSelect.addEventListener("input", validateProduct);
		  supplierSelect.addEventListener("input", validateSupplier);
		  warehouseInput.addEventListener("input", validateWarehouse);
		  quantityInput.addEventListener("input", validateQuantity);
		  
		  // Add submit event listener to prevent form submission if there are errors
		  orderForm.addEventListener("submit", function (e) {
			// Call validation functions before form submission
			validateProduct();
			validateSupplier();
			validateWarehouse();
			validateQuantity();
		  
			// Check for any error messages
			const errorMessages = document.querySelectorAll(".error");
			for (const errorMessage of errorMessages) {
			  if (errorMessage.textContent) {
				e.preventDefault(); // Prevent form submission if there are errors
				return;
			  }
			}
		  });
		  
		  

	});
</script>



						
<nav class="app-pagination">
    <ul class="pagination justify-content-center">
        {% if page.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1">&laquo; first</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page.previous_page_number }}">previous</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo; first</span>
            </li>
            <li class="page-item disabled">
                <span class="page-link">previous</span>
            </li>
        {% endif %}
        <li class="page-item active">
            <span class="page-link">{{ page.number }}</span>
        </li>
        {% if page.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page.next_page_number }}">next</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page.paginator.num_pages }}">last &raquo;</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">next</span>
            </li>
            <li class="page-item disabled">
                <span class="page-link">last &raquo;</span>
            </li>
        {% endif %}
    </ul>
</nav><!--//app-pagination-->

						
			        </div>
				</div><!--//tab-content-->
				
				
			    
		    </div><!--//container-fluid-->
	    </div><!--//app-content-->
	    
    
    </div><!--//app-wrapper-->    					

 
    <!-- Javascript -->          
    <script src="{% static 'assets/plugins/popper.min.js' %}"></script>
    <script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>  
	
    
    
    <!-- Page Specific JS -->
    <script src="{% static 'assets/js/app.js' %}"></script> 


	
	
</body>
</html> 
