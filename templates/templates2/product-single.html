{%extends 'base.html'%}
{% load static %}
{%block content%}
	<style>
		.product-image-container {
			width: 100%; /* Set a fixed width for the container */
			max-height: 300px; /* Set a maximum height for the images */
			overflow: hidden; /* Hide any overflow if the image is larger than the container */
			position: relative; /* Enable absolute positioning for the overlay */
		}
		
		.product-image {
			width: 100%; /* Ensure the image occupies the full width of its container */
			height: auto; /* Maintain the aspect ratio of the image */
			display: block; /* Remove any extra spacing below the image */
		}
		
		/* Example: Add a hover effect */
		.product-image:hover {
			transform: scale(1.05); /* Scale the image slightly on hover */
			transition: transform 0.3s ease; /* Add a smooth transition effect */
		}
		/* Style the "Add to Cart" button */
.add-to-cart-button {
    background-color: black; /* Button background color */
    color: green; /* Button text color */
    border: none; /* Remove button border */
    border-radius: 5px; /* Add rounded corners */
    font-size: 16px; /* Button text size */
    cursor: pointer; /* Add pointer cursor on hover */
	margin-left: 15px;
	width:225px;
}

/* Style the "Add to Cart" button on hover */
.add-to-cart-button:hover {
    background-color: black; /* Button background color on hover */
    color: black; /* Button text color on hover */
}
#cartlink{
	margin-left: 90px;

}

	.product {
		width: 100%;
		height: auto;
		border: 1px solid #ccc;
		margin-bottom: 20px;
		position: relative;
	}

	/* Style for the product image container */
	.img-container {
		position: relative;
		width: 100%;
		padding-bottom: 100%;
		overflow: hidden;
	}

	/* Style for the product image */
	.img-container img {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	/* Style for the status overlay */
	.status {
		position: absolute;
		top: 10px;
		right: 10px;
		background-color: green;
		color: white;
		padding: 5px 10px;
		border-radius: 5px;
	}

	.out-of-stock {
	  opacity: 0.6; /* Reduce opacity for a faded look */
	  pointer-events: none; /* Disable pointer events for this element */
  }
  h2 {
	font-size: 36px;
}

.scrollable-reviews {
	max-height: 250px;
	width: 800px;
	overflow-y: scroll;
	margin: 0 auto;
	background-color: #fff;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	margin-top: 20px;
	margin-left: 0px;

}

.review {
	border: 1px solid #ccc;
	padding: 10px;
	border-radius: 5px;
}

.head {
	/* You can add any specific styling for the review header here */
}

.content {
	/* You can add any specific styling for the review content here */
}

.name {
	font-weight: bold;
	color: #333;
}

.stars {
	color: #ff9800;
}

.review-text {
	color: #555;
}
.star-rating {
    font-size: 60px; /* Adjust the font size as needed */
    margin-left: 25px;
    transition: color 0.3s; /* Smooth transition for color change */

    /* Define your star color and any other desired properties */
    color: #ff9800;
}

.star-rating:hover {
    color: #fddb27; /* New color on hover (you can customize this) */
}
</style>
 

    <div class="hero-wrap hero-bread" style="background-image: url({% static 'static2/images/bg_1.jpg' %});">
      <div class="container">
        <div class="row no-gutters slider-text align-items-center justify-content-center">
          <div class="col-md-9 ftco-animate text-center">
          	{% comment %} <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span class="mr-2"><a href="index.html">Product</a></span> <span>Product Single</span></p>
            <h1 class="mb-0 bread">Product Single</h1> {% endcomment %}
          </div>
        </div>
      </div>
    </div>
	<section class="ftco-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 mb-5 ftco-animate">
					<img src="{{ product.product_image.url }}" class="img-fluid" alt="{{ product.product_name }}">
				</div>
				<div class="col-lg-6 product-details pl-md-5 ftco-animate">
					<h3>{{ product.product_name }}</h3>
					<!-- Display other product details like price, description, etc. -->
					<p class="price"><span>RS. {{ product.product_price }}</span></p>
					<p>{{ product.product_description }}</p>
	
					{% comment %} <!-- Display the seller's information -->
					<p>Seller: {{ product.seller }}</p>
					<strong>Seller's Address:</strong>
					<p>{{ seller_address }}</p>		{% endcomment %}		
					<h5>Total Stock: {{ total_stock }} units left</h5> 
					{% if average_rating %}
					<span class="star-rating">{{ average_rating }}</span>
				{% endif %}					<!-- Add to cart button or other actions as needed -->
					<form method="post">
						{% csrf_token %}
						<div class="input-group col-md-6 d-flex mb-3">
							<span class="input-group-btn mr-2">
								<button type="button" class="quantity-left-minus btn" data-type="minus" data-field="">
									<i class="ion-ios-remove"></i>
								</button>
							</span>
							<input type="hidden" name="product_price" value="{{ product.product_price }}">
							<input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100" >
							<span class="input-group-btn ml-2">
								<button type="submit" class="quantity-right-plus btn" data-type="plus" data-field="">
									<i class="ion-ios-add"></i>
								</button>
							</span>

						</div>
						 <div class="star-ratings">
							<div class="star-rating">
								<span class="filled-stars"></span>
								<span class="empty-stars"></span>
							</div>
						</div>
						{% if is_in_cart %}
							<p style="margin-left:20px;"> Product is already in your cart </p>
							<a href="{% url 'cart' %}" id="cartlink" >Go to Cart</a>
						{% elif total_stock < 1 %}
							<p style="margin-left:20px;"> Out of Stock </p>
						{% else %}
							<button type="submit" class="add-to-cart-button" name="buy_now" >Add to Cart</button><br><br>
						{% endif %}

					</form><br>
					{% if messages %}
					{% for message in messages %}
					<div class="alert alert-danger text-center" style="width: 50%;">{{ message }}</div>
					{% endfor %}						
				  {% endif %}		
				</div>
			</div>
			<h2>User Ratings and Reviews</h2>
		</header>
		<div class="scrollable-reviews">
			{% if reviews %}
				{% for review in reviews %}
					<div class="review">
						<div class="head">
							<img src="{{ review.user.userprofile.profile_pic.url }}" alt="{{ review.user.username }}'s Profile Image" width="50" class="rounded-image">
						</div>						
						<div class="content">
							<span class="name">Review by {{ review.user.username }}</span>
							<div class="stars">
								{% if review.rating == 5 %}
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								{% elif review.rating == 4 %}
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								{% elif review.rating == 3 %}
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-success mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								{% elif review.rating == 2 %}
								<small class="fa fa-star text-danger mr-1"></small>
								<small class="fa fa-star text-danger mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								{% elif review.rating <= 1 %} <small class="fa fa-star text-danger mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								<small class="fa fa-star text-secondary mr-1"></small>
								{% endif %}
							</div>
							<p class="review-text">{{ review.comment }}</p>
						</div>
					</div>
				{% endfor %}
			{% else %}
			<p class="review-text" style="margin-left:10px;"> No Reviews Available</p>
			{% endif %}
		</div>		
		</div>
	</section>
	
	<section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center mb-3 pb-3">
				<div class="col-md-12 heading-section text-center ftco-animate">
					<span class="subheading">Products</span>
					<h2 class="mb-4">Related Products</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia</p>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
			{% for product in other_related_products %}
				<div class="col-md-6 col-lg-3 ftco-animate">
					<div class="product">
						<a href="{% url 'product_single' product.product_id %}" class="img-prod">
							<div class="img-container">
								<img class="img-fluid" src="{{ product.product_image.url }}" alt="Product Image">
							</div>
							{% if product.product_stock > 0 %}
							<span class="status in-stock">In Stock</span>
							{% else %}
							<span class="status out-of-stock">Out of Stock</span>
							{% endif %}
							<div class="overlay"></div>
						</a>
						<div class="text py-3 pb-4 px-3 text-center">
							<h3><a href="#">{{ product.product_name }}</a></h3>
							<div class="d-flex">
								<div class="pricing">
									<p class="price"><span class="mr-2">RS. {{ product.product_price }}</span></p>
								</div>
							</div>
							<div class="bottom-area d-flex px-3">
								<div class="m-auto d-flex">
									<a href="#" class="add-to-cart d-flex justify-content-center align-items-center text-center">
										<span><i class="ion-ios-menu"></i></span>
									</a>
									<a href="#" class="buy-now d-flex justify-content-center align-items-center mx-1">
										<span><i class="ion-ios-cart"></i></span>
									</a>
									<a href="#" class="heart d-flex justify-content-center align-items-center">
										<span><i class="ion-ios-heart"></i></span>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</section>
	<script>
		$(document).ready(function(){

		var quantitiy=0;
		   $('.quantity-right-plus').click(function(e){
		        
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		            
		            $('#quantity').val(quantity + 1);

		          
		            // Increment
		        
		    });

		     $('.quantity-left-minus').click(function(e){
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		      
		            // Increment
		            if(quantity>0){
		            $('#quantity').val(quantity - 1);
		            }
		    });
		    
		});
	</script>
	{%endblock%}